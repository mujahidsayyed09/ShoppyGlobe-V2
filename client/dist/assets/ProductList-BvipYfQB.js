import{u as h,a as p,b as m,j as e,L as x,c as j,r as a,d as f,e as g}from"./index-BTZECHkw.js";function N({product:t}){const o=h(),c=p(),{isLoggedIn:r}=m(),n=()=>{if(!r){alert("Please log in to add items to cart."),c("/login");return}o(j(t))};return e.jsxs("div",{className:"product-card",children:[e.jsx("img",{src:t.image,alt:t.name,className:"product-image"}),e.jsxs("div",{className:"product-content",children:[e.jsx("h3",{className:"product-title",children:t.name}),e.jsxs("p",{className:"product-stock",children:["Stock: ",t.stockQuantity]}),e.jsxs("p",{className:"product-price",children:["$",t.price]}),e.jsxs("div",{className:"product-buttons",children:[e.jsx(x,{to:`/product/${t._id}`,className:"product-link",children:"View Details"}),e.jsx("button",{onClick:n,className:"add-cart-btn",children:"Add to Cart"})]})]})]})}const v="https://shoppyglobe-v2.onrender.com";function P(){const[t,o]=a.useState([]),[c,r]=a.useState([]),[n,d]=a.useState(!0),{searchText:i,setSearchText:l}=f();return a.useEffect(()=>{d(!0),fetch(`${v}/api/products`).then(s=>s.json()).then(s=>{o(s),r(s),d(!1)}).catch(s=>{console.error("Failed to fetch products:",s),d(!1)})},[]),a.useEffect(()=>{const s=t.filter(u=>u?.name?.toLowerCase().includes(i.toLowerCase()));r(s)},[i,t]),e.jsxs("div",{className:"product-list-container",children:[e.jsx("h2",{className:"page-title",children:"All Products"}),e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:"Search by product name...",value:i,onChange:s=>l(s.target.value),className:"search-input"})}),n?e.jsx(g,{}):e.jsx("div",{className:"product-grid",children:c.length>0?c.map(s=>e.jsx(N,{product:s},s._id)):e.jsx("p",{children:"No products found."})})]})}export{P as default};
